# MyBatis 到 JPA 映射报告

| Mapper 接口 | 原方法 | Repository 接口 | 新方法 |
| --- | --- | --- | --- |
| BlogDaoMapper | listPopularBlogs | BlogRepository | listPopularBlogs |
| BlogDaoMapper | listByRandom | BlogRepository | listByRandom |
| BlogDaoMapper | countAll | BlogRepository | countAll |
| BlogDaoMapper | listAll | BlogRepository | listAll |
| BlogDaoMapper | listAllDomainNames | BlogRepository | listAllDomainNames |
| BlogDaoMapper | listRecentCollected | BlogRepository | listRecentCollected |
| BlogDaoMapper | countWithKeyword | BlogRepository | countWithKeyword |
| BlogDaoMapper | listWithKeyWord | BlogRepository | listWithKeyWord |
| BlogDaoMapper | listBlogCollectedAt | BlogRepository | listBlogCollectedAt |
| BlogDaoMapper | existsByDomainName | BlogRepository | existsByDomainName |
| BlogDaoMapper | existsByRssAddress | BlogRepository | existsByRssAddress |
| BlogDaoMapper | getByDomainName | BlogRepository | getByDomainName |
| BlogDaoMapper | listByAdminEmail | BlogRepository | listByAdminEmail |
| BlogDaoMapper | getByShortDomainName | BlogRepository | getByShortDomainName |
| BlogDaoMapper | getByAddress | BlogRepository | findByAddress |
| BlogDaoMapper | getByRSSAddress | BlogRepository | getByRSSAddress |
| BlogDaoMapper | getByMd5AdminEmail | BlogRepository | getByMd5AdminEmail |
| BlogDaoMapper | getJoinYearsByDomainName | BlogRepository | getJoinYearsByDomainName |
| BlogDaoMapper | save | BlogRepository | save |
| BlogDaoMapper | update | BlogRepository | update |
| BlogDaoMapper | updateGravatarValidFlag | BlogRepository | updateGravatarValidFlag |
| BlogDaoMapper | deleteByDomainName | BlogRepository | deleteByDomainName |
| BlogDaoMapper | markAsInvalid | BlogRepository | markAsInvalid |

说明：

- `getByAddress` 改为使用 JPA 命名方法 `findByAddress`，不再使用自定义 SQL。
- `listByRandom` 增加辅助参数 `excludedEmpty` 以便在原有 MyBatis `<if>` 条件可选地跳过 `NOT IN` 子句。

| Mapper 接口 | 原方法 | Repository 接口 | 新方法 |
| --- | --- | --- | --- |
| UserDaoMapper | getUserByUsername | UserRepository | findByUsername |
| PostDaoMapper | getMostPublishedInLatestOneMonth | PostRepository | getMostPublishedInLatestOneMonth |
| PostDaoMapper | getBlogPostPublishSeriesInLatestOneYear | PostRepository | getBlogPostPublishSeriesInLatestOneYear |
| PostDaoMapper | countWithKeyWord | PostRepository | countWithKeyWord |
| PostDaoMapper | listWithKeyWord | PostRepository | listWithKeyWord |
| PostDaoMapper | countAll | PostRepository | countAll |
| PostDaoMapper | getLatestPublishedAtByBlogDomainName | PostRepository | getLatestPublishedAtByBlogDomainName |
| PostDaoMapper | countByBlogDomainName | PostRepository | countByBlogDomainName |
| PostDaoMapper | countByBlogDomainNameAndStartDate | PostRepository | countByBlogDomainNameAndStartDate |
| PostDaoMapper | countByDraftAndBlogDomainName | PostRepository | countByDraftAndBlogDomainName |
| PostDaoMapper | listByDraftAndBlogDomainName | PostRepository | listByDraftAndBlogDomainName |
| PostDaoMapper | listRecommendedByBlogDomainName | PostRepository | listRecommendedByBlogDomainName |
| PostDaoMapper | listBlogPostCount | PostRepository | listBlogPostCount |
| PostDaoMapper | getByLink | PostRepository | findByLink |
| PostDaoMapper | existsByLink | PostRepository | existsByLink |
| PostDaoMapper | existsByTitle | PostRepository | existsByTitle |
| PostDaoMapper | batchSave | PostRepository | batchSave |
| PostDaoMapper | save | PostRepository | save |
| PostDaoMapper | batchUpdateDraftByBlogDomainName | PostRepository | batchUpdateDraftByBlogDomainName |
| PostDaoMapper | deleteByBlogDomainName | PostRepository | deleteByBlogDomainName |
| PostDaoMapper | deleteByLink | PostRepository | deleteByLink |
| PostDaoMapper | recommendByLink | PostRepository | recommendByLink |
| PostDaoMapper | unpinByLink | PostRepository | unpinByLink |
| PostDaoMapper | pinByLink | PostRepository | pinByLink |
| MomentDaoMapper | list | MomentRepository | list |
| MomentDaoMapper | count | MomentRepository | count |
| MomentDaoMapper | existsByBlogDomainNameAndDescription | MomentRepository | existsByBlogDomainNameAndDescription |
| MomentDaoMapper | save | MomentRepository | save |
| SubscriptionDaoMapper | listSubscribedByType | SubscriptionRepository | listSubscribedByType |
| SubscriptionDaoMapper | existsSubscribedByEmail | SubscriptionRepository | existsSubscribedByEmail |
| SubscriptionDaoMapper | existsSubscribedByEmailAndType | SubscriptionRepository | existsSubscribedByEmailAndType |
| SubscriptionDaoMapper | listSubscribedByEmail | SubscriptionRepository | listSubscribedByEmail |
| SubscriptionDaoMapper | subscribe | SubscriptionRepository | subscribe |
| SubscriptionDaoMapper | unsubscribe | SubscriptionRepository | unsubscribe |
| AccessDaoMapper | countAll | AccessRepository | countAll |
| AccessDaoMapper | getMostAccessedBlogDomainNameInLastMonth | AccessRepository | getMostAccessedBlogDomainNameInLastMonth |
| AccessDaoMapper | getMostAccessedLinkByBlogDomainName | AccessRepository | getMostAccessedLinkByBlogDomainName |
| AccessDaoMapper | getBlogAccessSeriesInLatestOneYear | AccessRepository | getBlogAccessSeriesInLatestOneYear |
| AccessDaoMapper | countByBlogDomainName | AccessRepository | countByBlogDomainName |
| AccessDaoMapper | countByBlogDomainNameAndStartDate | AccessRepository | countByBlogDomainNameAndStartDate |
| AccessDaoMapper | listBlogAccessCount | AccessRepository | listBlogAccessCount |
| AccessDaoMapper | countByLink | AccessRepository | countByLink |
| AccessDaoMapper | save | AccessRepository | save |
| AccessDaoMapper | deleteByBlogDomainName | AccessRepository | deleteByBlogDomainName |
| BlogStatusDaoMapper | getLatestByBlogDomainName | BlogStatusRepository | getLatestByBlogDomainName |
| BlogStatusDaoMapper | save | BlogStatusRepository | save |
| BlogStatusDaoMapper | deleteByBlogDomainName | BlogStatusRepository | deleteByBlogDomainName |
| BlogRequestDaoMapper | listBySelfSubmittedAndStatuses | BlogRequestRepository | listBySelfSubmittedAndStatuses |
| BlogRequestDaoMapper | countBySelfSubmittedAndStatuses | BlogRequestRepository | countBySelfSubmittedAndStatuses |
| BlogRequestDaoMapper | listByStatuses | BlogRequestRepository | listByStatuses |
| BlogRequestDaoMapper | countByStatuses | BlogRequestRepository | countByStatuses |
| BlogRequestDaoMapper | listByStatus | BlogRequestRepository | listByStatus |
| BlogRequestDaoMapper | getById | BlogRequestRepository | getById |
| BlogRequestDaoMapper | getByRssAddress | BlogRequestRepository | getByRssAddress |
| BlogRequestDaoMapper | update | BlogRequestRepository | update |
| BlogRequestDaoMapper | submit | BlogRequestRepository | submit |
| BlogRequestDaoMapper | deleteByRssAddress | BlogRequestRepository | deleteByRssAddress |
| DomainNameInfoDaoMapper | getByBlogDomainName | DomainNameInfoRepository | getByBlogDomainName |
| DomainNameInfoDaoMapper | save | DomainNameInfoRepository | save |
| DomainNameInfoDaoMapper | update | DomainNameInfoRepository | update |
| FriendLinkDaoMapper | listAll | FriendLinkRepository | listAll |
| FriendLinkDaoMapper | listBySourceBlogDomainName | FriendLinkRepository | listBySourceBlogDomainName |
| FriendLinkDaoMapper | getBySourceAndTargetBlogDomainName | FriendLinkRepository | getBySourceAndTargetBlogDomainName |
| FriendLinkDaoMapper | getDirectTargetBlogDomainNames | FriendLinkRepository | getDirectTargetBlogDomainNames |
| FriendLinkDaoMapper | getDirectSourceBlogDomainNames | FriendLinkRepository | getDirectSourceBlogDomainNames |
| FriendLinkDaoMapper | listAllSourceBlogs | FriendLinkRepository | listAllSourceBlogs |
| FriendLinkDaoMapper | listAllTargetBlogs | FriendLinkRepository | listAllTargetBlogs |
| FriendLinkDaoMapper | getJobMaxCreatedAt | FriendLinkRepository | getJobMaxCreatedAt |
| FriendLinkDaoMapper | deleteBySourceBlogDomainName | FriendLinkRepository | deleteBySourceBlogDomainName |
| FriendLinkDaoMapper | deleteByTargetBlogDomainName | FriendLinkRepository | deleteByTargetBlogDomainName |
| FriendLinkDaoMapper | save | FriendLinkRepository | save |
| LikeDaoMapper | countByTypeAndEntityId | LikeRepository | countByTypeAndEntityId |
| LikeDaoMapper | add | LikeRepository | add |
| EmailValidationDaoMapper | getByEmailAndCode | EmailValidationRepository | getByEmailAndCode |
| EmailValidationDaoMapper | countTodayIssuedByEmail | EmailValidationRepository | countTodayIssuedByEmail |
| EmailValidationDaoMapper | save | EmailValidationRepository | save |
| PostImageDaoMapper | getByLink | PostImageRepository | findByLink |
| PostImageDaoMapper | getImageURLByLink | PostImageRepository | getImageURLByLink |
| PostImageDaoMapper | existsImageURLByLink | PostImageRepository | existsImageURLByLink |
| PostImageDaoMapper | save | PostImageRepository | save |
| PostImageDaoMapper | update | PostImageRepository | update |
| EmailLogDaoMapper | existsByBlogDomainNameAndType | EmailLogRepository | existsByBlogDomainNameAndType |
| EmailLogDaoMapper | getLatestByBlogDomainNameAndType | EmailLogRepository | getLatestByBlogDomainNameAndType |
| EmailLogDaoMapper | save | EmailLogRepository | save |
| PinHistoryDaoMapper | save | PinHistoryRepository | save |
| PinHistoryDaoMapper | listLinksByBlogDomainName | PinHistoryRepository | listLinksByBlogDomainName |
| PlanetShuttleDaoMapper | getMostInitiatedBlogDomainNameInLastMonth | PlanetShuttleRepository | getMostInitiatedBlogDomainNameInLastMonth |
| PlanetShuttleDaoMapper | getLatestInitiatedYearMonthStr | PlanetShuttleRepository | getLatestInitiatedYearMonthStr |
| PlanetShuttleDaoMapper | getBlogInitiatedSeriesInLatestOneYear | PlanetShuttleRepository | getBlogInitiatedSeriesInLatestOneYear |
| PlanetShuttleDaoMapper | countInitiatedByBlogDomainName | PlanetShuttleRepository | countInitiatedByBlogDomainName |
| PlanetShuttleDaoMapper | save | PlanetShuttleRepository | save |
| BlogIntimacySearchHistoryDaoMapper | listLatest | BlogIntimacySearchHistoryRepository | listLatest |
| BlogIntimacySearchHistoryDaoMapper | save | BlogIntimacySearchHistoryRepository | save |
| MonthlySelectedDaoMapper | listYearMonthStrs | MonthlySelectedRepository | listYearMonthStrs |
| MonthlySelectedDaoMapper | listSelectedPostsByYearMonthStr | MonthlySelectedRepository | listSelectedPostsByYearMonthStr |
| BlogLocationDaoMapper | existsByDomainName | BlogLocationRepository | existsByDomainName |
| BlogLocationDaoMapper | getByDomainName | BlogLocationRepository | getByDomainName |
| BlogLocationDaoMapper | save | BlogLocationRepository | save |
| BlogLocationDaoMapper | update | BlogLocationRepository | update |
| BlogLocationDaoMapper | deleteByDomainName | BlogLocationRepository | deleteByDomainName |
| DomainNameChangeDaoMapper | existsByOldDomainName | DomainNameChangeRepository | existsByOldDomainName |
| DomainNameChangeDaoMapper | getByOldDomainName | DomainNameChangeRepository | getByOldDomainName |
| DomainNameChangeDaoMapper | save | DomainNameChangeRepository | save |
